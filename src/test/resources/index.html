<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Enterprise API Intelligence</title>

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }

        :root {
          --bg-p:#08080c; --bg-s:#12121e; --bg-t:#1a1a2b;
          --acc:#00e5ff; --pass:#00ff95; --fail:#ff0055;
          --txt:#ffffff; --dim:#71718a; --brd:#252538;
        }

        body {
          font-family: Manrope, Arial, sans-serif;
          background: var(--bg-p);
          color: var(--txt);
        }

        header {
          padding:1rem 3rem;
          background:rgba(18,18,30,.8);
          border-bottom:1px solid var(--brd);
          display:flex;
          justify-content:space-between;
        }

        .logo { font-weight:800; color:var(--acc); }

        .container {
          max-width:1400px;
          margin:2rem auto;
          padding:0 2rem;
        }

        .grid-stats {
          display:grid;
          grid-template-columns:repeat(4,1fr);
          gap:1.5rem;
          margin-bottom:2rem;
        }

        .card {
          background:var(--bg-s);
          padding:1.5rem;
          border-radius:12px;
          border:1px solid var(--brd);
        }

        .stat {
          font-size:2.5rem;
          font-weight:800;
        }

        .layout {
          display:grid;
          grid-template-columns:300px 1fr;
          gap:2rem;
        }

        .donut {
          width:220px;
          height:220px;
          border-radius:50%;
          background:conic-gradient(
            var(--pass) 0% __PASS_PERCENT__%,
            var(--fail) __PASS_PERCENT__% 100%
          );
        }

        .table-box {
          background:var(--bg-s);
          border-radius:12px;
          overflow:hidden;
          border:1px solid var(--brd);
        }

        table {
          width:100%;
          border-collapse:collapse;
        }

        th, td {
          padding:1rem;
          border-bottom:1px solid var(--brd);
        }

        th {
          background:var(--bg-t);
          color:var(--dim);
          text-align:left;
          font-size:.7rem;
        }

        .badge {
          padding:4px 10px;
          border-radius:4px;
          font-size:.7rem;
          font-weight:700;
        }

        .pass { background:#00ff9520; color:var(--pass); }
        .fail { background:#ff005520; color:var(--fail); }

        .details { display:none; background:#050508; }
        .details.active { display:table-row; }

        pre {
          background:#000;
          padding:12px;
          border-radius:6px;
          margin-top:10px;
          color:#9ad7ff;
          white-space:pre-wrap;
        }
    </style>
</head>

<body>

<header>
    <div class="logo">API INTELLIGENCE</div>
    <div>BUILD: STATIC</div>
</header>

<div class="container">

    <div class="grid-stats">
        <div class="card">TOTAL<div class="stat" id="tot">0</div></div>
        <div class="card">PASSED<div class="stat" id="pas" style="color:var(--pass)">0</div></div>
        <div class="card">FAILED<div class="stat" id="fai" style="color:var(--fail)">0</div></div>
        <div class="card">STABILITY<div class="stat" id="rate">0%</div></div>
    </div>

    <div class="layout">
        <div class="card"><div class="donut"></div></div>

        <div class="table-box">
            <table>
                <thead>
                <tr><th>Test</th><th>Status</th><th>Duration</th></tr>
                </thead>
                <tbody id="rows"></tbody>
            </table>
        </div>
    </div>

</div>

<script>
    const DATA = __REPORT_DATA__;

    document.getElementById("tot").innerText = DATA.summary.total;
    document.getElementById("pas").innerText = DATA.summary.passed;
    document.getElementById("fai").innerText = DATA.summary.failed;
    document.getElementById("rate").innerText = DATA.summary.passRate;

    const rows = document.getElementById("rows");

    DATA.tests.forEach(t => {
      rows.innerHTML += `
        <tr onclick="toggle(${t.id})" style="cursor:pointer">
          <td>${t.name}</td>
          <td><span class="badge ${t.status==='PASS'?'pass':'fail'}">${t.status}</span></td>
          <td>${t.duration}</td>
        </tr>
        <tr id="d${t.id}" class="details">
          <td colspan="3">
            ${t.steps.map(s =>
              `<b>[${s.type}] ${s.label}</b><pre>${s.value}</pre>`
            ).join("")}
          </td>
        </tr>
      `;
    });

    function toggle(id){
      document.getElementById("d"+id).classList.toggle("active");
    }
</script>

</body>
</html>
